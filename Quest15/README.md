# Quest 15. 자동화된 테스트

## Introduction

- 이번 퀘스트에서는 자동화된 테스트에 어떤 장점이 있는지, 어떤 식으로 구축할 수 있는지에 대해 알아보겠습니다.

## Topics

- Automated Test
  - TDD
  - Unit Test
  - Integration Test
  - E2E Test
  - Stub & Mock
- Jest
- Puppeteer

## Resources

- [Unit Test (단위 테스트) 도입하기](https://www.popit.kr/unit-test-%EB%8B%A8%EC%9C%84-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EB%8F%84%EC%9E%85%ED%95%98%EA%B8%B0-1%ED%8E%B8/)
- [소프트웨어 테스트 안티 패턴](https://velog.io/@leejh3224/%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%95%88%ED%8B%B0-%ED%8C%A8%ED%84%B4)
- [End-to-End testing with Puppeteer and Jest](https://medium.com/touch4it/end-to-end-testing-with-puppeteer-and-jest-ec8198145321)
- [Mock & Stub](https://stackoverflow.com/questions/3459287/whats-the-difference-between-a-mock-stub)

## Checklist

- 자동화된 테스트를 만드는 것에는 어떤 장점과 단점이 있을까요?

      장점
      - 자동화된 테스트를 통해 사용자 테스터와 비교하여 더 많은 버그를 찾을 수 있음.
      - 테스트 프로세스의 대부분은 자동화되어 있으므 로 신속하고 효율적인 프로세스가 가능
      - 자동화 프로세스를 기록 할 수 있음. 이를 통해 동일한 종류의 테스트 작업을 다시 사용하 고 실행할 수 있음.
      - 자동화된 테스트는 소프트웨어 도구를 사용하여 수행되므로 수동 테스트에서 사람과 달리 피로없이 작동.
      - 빠르고 정확한 시험 결과를 제공하므로 생산성 을 쉽게 높일 수 있음.
      - 자동화 된 테스트는 다양한 어플리케이션을 지원.
      - 자동화 테스팅 도구가 가장 작은 단위조차 확인 하는 것을 잊지 않기 때문에 테스트 범위를 늘릴 수 있음.

      단점
      - 인간 요소가 없으면 색상, 글꼴, 크기, 대비 또는 단추 크기와 같은 UI의 시각적 요소를 파악하기 가 어렵습니다.
      - 자동화 테스트를 실행하는 도구는 비용이 많이 들 수 있으므로 테스트 프로젝트의 비용이 증가 할 수 있음.
      - 모든 자동화 도구에는 자동화의 범위를 축 소시키는 한계가 있음.
      - 테스트 스크립트를 디버깅하는 것은 자동화된 테스트의 또 다른 주요 문제. 테스트 유지 보수에는 많은 비용이 듬.

- TDD(Test-Driven Development)란 무엇인가요? TDD의 장점과 단점은 무엇일까요?

> TDD(테스트 주도 개발, test-driven development)는 소프트웨어 개발 방법론 중의 하나로, 선 개발 후 테스트 방식이 아닌 선 테스트 후 개발 방식의 프로그래밍 방법. 다시 말해 먼저 자동화된 테스트 코드를 작성한 후 테스트를 통과하기 위한 코드를 개발하는 방식.

      장점
      - 객체 지향적인 코드 개발
      - 설계 수정시간의 단축
      - 유지보수(리팩토링)의 용이성
      - 테스트 문서의 대체 가능

      단점
      - 사전준비 기간
      - 생산성 저하

- 테스트들 간의 계층에 따라 어떤 단계들이 있을까요?

- 유닛 테스트, 통합 테스트, E2E 테스트는 각각 어떤 것을 뜻하나요?

      유닛 테스트: 함수 하나하나와 같이 코드의 작은 부분을 테스트하는 것.
      통합 테스트: 서로 다른 시스템들의 상호작용이 잘 이루어 지는지 테스트하는 것.
      E2E 테스트 : 발물을 사용자 관점에서 테스트 하는 방법. 페이지에서 원하는 텍스트가 제대로 출력이 되었는지, 버튼을 클릭 했을 때 올바른 동작을 수행하는 지 등을 테스트하는 것.

- 테스트에 있어서 Stub과 Mock은 어떤 개념을 가리키는 것일까요?

      Stub : 인스턴스화하여 구현한 가짜 객체(Dummy, 기능 구현이 없음)을 이용해 실제로 동작하는 것처럼 보이게 만드는 객체.
      - 해당 인터페이스나 클래스를 최소한으로 구현.
      - 테스트에서 호출된 요청에 대해 미리 준비해둔 답변을 응답.
      - 테스트시에 프로그래밍된 것 외에는 응답하지 않음.
      - 협력 객체의 특정 부분이 테스트가 어려운 경우, stub을 사용하여 수월하게 테스트할 수 있음.

      Mock : 호출에 대한 기대를 명세하고, 내용에 따라 동작하도록 프로그래밍 된 객체.
      - 테스트 작성을 위한 환경 구축이 어려울 때, 테스트하고자 하는 코드와 엮인 객체들을 대신하기 위해 만들어진 객체.
      - 행위 검증을 진행.

- Jest는 어떤 일을 하며 어떻게 사용하는 테스트 프레임워크일까요?

> 단순함에 초점을 둔 FaceBook에 의해서 만들어진 오픈소스 자바스크립트 테스트 프레임 워크. 코드가 제대로 동작하는지 확인하는 Test Case를 만듦.

      1. 프로젝트 생성 : 프로젝트 디렉터리를 생성하고 NPM 초기화 커맨드로 package.jso 파일을 생성.

```
$ mkdir my-jest
$ npm init -y
$ ls
package.json
```

      2. Jest 라이브러리 설치
      - Jest 라이브러를 개발 의존성으로 설치.
      - 개발 의존성으로 설치하는 것은 package.json 안에 dependencies가 아닌 devDependencies에 저장. devDependencies는 개발 시 사용하는 패키지를 설치하는 곳으로 배포시에는 포함되지 않음.

```
$ npm i -D jest
```

      3. test Script 수정 : package.json 파일에서 test Script를 jest로 수정.

```
"scripts": {
  "test": "jest"
},
```

- Jest 이외의 테스트 프레임워크는 어떤 것이 있고 어떤 장단점이 있을까요?

  > Mocha : Node.js와 브라우저에서 실행되는 기능이 풍부한 자바스크립트 테스트 프레임워크. 비동기식 테스트를 간단하게 진행 가능.
  > Jasmine : 자바스크립트 코드를 테스트하기 위한 동작 중심 개발 프레임워크. Jasmine은 다른 자바스크립트 프레임워크에 의존하지 않으며, DOM이 필요하지 않음.

- Puppeteer는 어떤 일을 하며 어떻게 사용하는 테스트 프레임워크일까요?

  > - Chromium이 포함되어 있고, 기본적으로 "Head가 없는" 상태로 실행. 여기서 Head가 없는 브라우저, Headless browser 란 UI 없이 간편하게 백그라운드에서 실행되는 브라우저. 실제로 브라우저 창을 띄우지 않고 백그라운드에서 가상으로 진행되며, 특정 페이지에 접속하고 렌더링 되는 과정 후 수행하고자 하는 코드를 수행하는데 용이. 예를 들면 GUI가 없는 Ubuntu 서버 환경에서 용이할 수 있을 것.
  > - 브라우저 상에서 할 수 있는 것들은 대부분 Puppteer로 가능. 예를 들면, 스크린샷을 찍어 PDF로 만들거나, SPA로 되어 있는 페이지를 크롤링하거나, UI 테스트, 키보드 입력 자동화, 최신 버전의 크롬 브라우저 환경에서의 테스트 등 매우 다양.

## Quest

- 직전 퀘스트의 메모장의 서버와 클라이언트 각 부분에 유닛 테스트, 통합 테스트, E2E 테스트 등을 추가해 보세요.
  - `npm test` 명령을 통해 모든 테스트가 돌고 그 결과를 출력할 수 있어야 합니다.

## Advanced

- 테스트의 커버리지는 어떤 개념일까요? 프로젝트에서 테스트의 커버리지는 어떻게 접근하는 것이 좋을까요?
